<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psykiatrisk Phrase Generator</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel (til at forstå JSX i browseren) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        /* Skjul scrollbar for renere look men behold funktionalitet */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-900 font-sans overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- IKONER (SVG komponenter for at undgå eksterne dependencies) ---
        const Icon = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Activity = ({ className }) => <Icon className={className}><path d="M22 12h-4l-3 9L9 3l-3 9H2"/></Icon>;
        const Brain = ({ className }) => <Icon className={className}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></Icon>;
        const Stethoscope = ({ className }) => <Icon className={className}><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v1a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6v-4"/><circle cx="20" cy="10" r="2"/></Icon>;
        const FileText = ({ className }) => <Icon className={className}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></Icon>;
        const RotateCcw = ({ className }) => <Icon className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></Icon>;
        const Clipboard = ({ className }) => <Icon className={className}><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/></Icon>;
        const Maximize = ({ className }) => <Icon className={className}><path d="M8 3H5a2 2 0 0 0-2 2v3"/><path d="M21 8V5a2 2 0 0 0-2-2h-3"/><path d="M3 16v3a2 2 0 0 0 2 2h3"/><path d="M16 21h3a2 2 0 0 0 2-2v-3"/></Icon>;
        const Minimize = ({ className }) => <Icon className={className}><path d="M8 3v3a2 2 0 0 1-2 2H3"/><path d="M21 8h-3a2 2 0 0 1-2-2V3"/><path d="M3 16h3a2 2 0 0 1 2 2v3"/><path d="M16 21v-3a2 2 0 0 1 2-2h3"/></Icon>;
        const CheckCircle2 = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></Icon>;
        const AlertCircle = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></Icon>;
        const XCircle = ({ className }) => <Icon className={className}><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></Icon>;

        // --- DATA ---
        const PSYCH_OPTIONS = [
            { id: 'orient_normal', label: 'Fuldt orienteret', category: 'Bevidsthed', text: 'Vågen, klar og orienteret i tid, sted og egne data.', isDefault: true, exclude: ['orient_confused', 'orient_delir'] },
            { id: 'orient_confused', label: 'Konfus', category: 'Bevidsthed', text: 'Vågen, men fremstår konfus og desorienteret.', exclude: ['orient_normal'] },
            { id: 'orient_delir', label: 'Delirøs', category: 'Bevidsthed', text: 'Fremstår med svingende bevidsthedsniveau og opmærksomhedsforstyrrelse, obs delir.', exclude: ['orient_normal'] },
            { id: 'appear_normal', label: 'Normal fremtoning', category: 'Fremtoning', text: 'Normal fremtoning, herunder soigneret og alderssvarende påklædning.', isDefault: true, exclude: ['appear_unkept'] },
            { id: 'appear_unkept', label: 'Usoigneret', category: 'Fremtoning', text: 'Fremstår usoigneret, lugtende og med mangelfuld hygiejne.', exclude: ['appear_normal'] },
            { id: 'contact_normal', label: 'Formel/Emotionel intakt', category: 'Kontakt', text: 'Formel og emotionel kontakt er intakt. Øjenkontakten er naturlig.', isDefault: true, exclude: ['contact_form_bad', 'contact_emo_bad', 'contact_avig'] },
            { id: 'contact_form_bad', label: 'Formel kontakt afvigende', category: 'Kontakt', text: 'Formel kontakt er afvigende, præget af distancering.', exclude: ['contact_normal'] },
            { id: 'contact_emo_bad', label: 'Emotionel kontakt nedsat', category: 'Kontakt', text: 'Emotionel kontakt er nedsat, virker affladet.', exclude: ['contact_normal'] },
            { id: 'contact_avig', label: 'Afvigende øjenkontakt', category: 'Kontakt', text: 'Undvigende øjenkontakt.', exclude: ['contact_normal'] },
            { id: 'mood_neutral', label: 'Neutralt', category: 'Stemningsleje', text: 'Stemningslejet vurderes neutralt.', isDefault: true, exclude: ['mood_low', 'mood_high', 'mood_dys', 'mood_labile'] },
            { id: 'mood_low', label: 'Sænket', category: 'Stemningsleje', text: 'Stemningslejet vurderes tydeligt sænket.', exclude: ['mood_neutral', 'mood_high'] },
            { id: 'mood_high', label: 'Løftet/Manisk', category: 'Stemningsleje', text: 'Stemningslejet er løftet, præget af øget energi og foretagsomhed.', exclude: ['mood_neutral', 'mood_low'] },
            { id: 'mood_dys', label: 'Dysforisk', category: 'Stemningsleje', text: 'Fremstår dysforisk og irritabel.', exclude: ['mood_neutral'] },
            { id: 'mood_labile', label: 'Grådlabil', category: 'Stemningsleje', text: 'Fremstår grådlabil under samtalen.', exclude: ['mood_neutral'] },
            { id: 'motor_normal', label: 'Normal psykomotorik', category: 'Psykomotorik', text: 'Psykomotorisk normalt.', isDefault: true, exclude: ['motor_agit', 'motor_inhib', 'motor_restless'] },
            { id: 'motor_agit', label: 'Agiteret', category: 'Psykomotorik', text: 'Psykomotorisk agiteret/urolig.', exclude: ['motor_normal', 'motor_inhib'] },
            { id: 'motor_inhib', label: 'Hæmmet', category: 'Psykomotorik', text: 'Psykomotorisk hæmmet med lang latenstid.', exclude: ['motor_normal', 'motor_agit'] },
            { id: 'motor_restless', label: 'Indre uro', category: 'Psykomotorik', text: 'Angiver indre uro, men fremstår motorisk rolig.', exclude: ['motor_normal'] },
            { id: 'think_normal', label: 'Samlet/Relevant', category: 'Tænkning', text: 'Talen er samlet, relevant og velorganiseret uden latenstid eller talepres.', isDefault: true, exclude: ['think_press', 'think_incoh', 'think_latency'] },
            { id: 'think_press', label: 'Talepres', category: 'Tænkning', text: 'Der er udtalt talepres og svært afledelighed.', exclude: ['think_normal'] },
            { id: 'think_incoh', label: 'Inkohærent', category: 'Tænkning', text: 'Tanken er springende og præget af løse associationer (inkohærent).', exclude: ['think_normal'] },
            { id: 'think_latency', label: 'Latenstid', category: 'Tænkning', text: 'Svarer relevant, men med betydelig latenstid.', exclude: ['think_normal'] },
            { id: 'psychosis_none', label: 'Ingen psykose', category: 'Perception/Indhold', text: 'Ingen tegn på produktive psykotiske symptomer, herunder ingen hallucinationer eller vrangforestillinger.', isDefault: true, exclude: ['psychosis_hallu', 'psychosis_paranoia', 'psychosis_megalo'] },
            { id: 'psychosis_hallu', label: 'Hallucinationer', category: 'Perception/Indhold', text: 'Der er evidens for hørehallucinationer (kommenterende/bydende).', exclude: ['psychosis_none'] },
            { id: 'psychosis_paranoia', label: 'Paranoia', category: 'Perception/Indhold', text: 'Præget af paranoide vrangforestillinger og forfølgelsestanker.', exclude: ['psychosis_none'] },
            { id: 'psychosis_megalo', label: 'Storhedsvanvid', category: 'Perception/Indhold', text: 'Giver udtryk for megalomane vrangforestillinger.', exclude: ['psychosis_none'] },
            { id: 'cog_normal', label: 'Normal kognition', category: 'Kognition', text: 'Kognitivt upåfaldende i samtalen.', isDefault: true, exclude: ['cog_imp'] },
            { id: 'cog_imp', label: 'Kognitivt svækket', category: 'Kognition', text: 'Virker kognitivt svækket med hukommelsesbesvær.', exclude: ['cog_normal'] },
            { id: 'insight_good', label: 'God indsigt', category: 'Indsigt', text: 'Har relevant og god sygdomsindsigt.', isDefault: true, exclude: ['insight_none', 'insight_part'] },
            { id: 'insight_part', label: 'Partiel indsigt', category: 'Indsigt', text: 'Har partiel sygdomsindsigt.', exclude: ['insight_good', 'insight_none'] },
            { id: 'insight_none', label: 'Ingen indsigt', category: 'Indsigt', text: 'Ingen sygdomsindsigt.', exclude: ['insight_good', 'insight_part'] },
            { id: 'sui_none', label: 'Ingen suicidalitet', category: 'Risikovurdering', text: 'Ingen aktuelle tanker om død eller selvmord. Ingen selvmordsplaner eller -intentioner.', isDefault: true, exclude: ['sui_passive', 'sui_active'] },
            { id: 'sui_passive', label: 'Passive tanker', category: 'Risikovurdering', text: 'Angiver passive dødstanker ("kunne være rart ikke at vågne"), men ingen aktuelle planer eller intentioner.', exclude: ['sui_none', 'sui_active'] },
            { id: 'sui_active', label: 'Aktive planer', category: 'Risikovurdering', text: 'OBS: Tilkendegiver konkrete selvmordstanker og planer.', exclude: ['sui_none', 'sui_passive'] },
        ];

        const SOMATIC_OBJ_OPTIONS = [
            { id: 'gen_upavirket', label: 'Upåvirket', category: 'Almentilstand', text: 'Almentilstand upåvirket. Normal ernæringstilstand.', isDefault: true, exclude: ['gen_medtaget', 'gen_adipos'] },
            { id: 'gen_medtaget', label: 'Medtaget/Kakektisk', category: 'Almentilstand', text: 'Fremstår kronisk medtaget og kakektisk.', exclude: ['gen_upavirket'] },
            { id: 'cp_normal', label: 'St.c. et p. normal', category: 'Stethoscopia', text: 'St.c.: Regelmæssig hjerteaktion uden mislyde. St.p.: Vesikulær respiration uden bilyde.', isDefault: true, exclude: ['cp_abnorm'] },
            { id: 'cp_abnorm', label: 'St.c. uregelmæssig', category: 'Stethoscopia', text: 'St.c.: Uregelmæssig hjerteaktion (arytmi).', exclude: ['cp_normal'] },
            { id: 'cn_normal', label: 'Kranienerver normal', category: 'Neurologisk', text: 'Kranienerver: Intet abnormt påvist, systematisk undersøgt (II-XII). Pupiller egale med normal lysrefleks. Ingen nystagmus.', isDefault: true, exclude: ['cn_abnorm'] },
            { id: 'cn_abnorm', label: 'CN udfald', category: 'Neurologisk', text: 'Kranienerver: [UDFYLD SPECIFIKT FUND HER].', exclude: ['cn_normal'] },
            { id: 'motor_sys_normal', label: 'Motorik/Kraft normal', category: 'Neurologisk', text: 'Motorisk system: Strakt arm- og bentest uden nedsynkning. Egal kraft over de større led (intet abnormt påvist).', isDefault: true, exclude: ['motor_sys_weak'] },
            { id: 'reflex_normal', label: 'Reflekser normale', category: 'Neurologisk', text: 'Reflekser: Normale og sidelige dybe senereflekser. Babinski negativ bilat.', isDefault: true, exclude: ['reflex_hyper'] },
            { id: 'coord_normal', label: 'Koordination normal', category: 'Neurologisk', text: 'Cerebellart: Normal koordination ved finger-næse forsøg og knæ-hæl forsøg.', isDefault: true, exclude: ['coord_ataxia'] },
            { id: 'gait_normal', label: 'Gang/Stand normal', category: 'Neurologisk', text: 'Gang og stand: Sikker gang, vending og stand.', isDefault: true, exclude: ['gait_unsure'] },
            { id: 'eps_none', label: 'Ingen EPS', category: 'Neurologisk (EPS)', text: 'Ekstrapyramidale system: Ingen bradykinesi, rigiditet eller ufrivillige bevægelser. Ingen hvile- eller intentionstremor.', isDefault: true, exclude: ['eps_rigid', 'eps_tremor', 'eps_dyskinesia'] },
            { id: 'eps_rigid', label: 'Rigiditet', category: 'Neurologisk (EPS)', text: 'Der findes rigiditet (tandhjulsrigiditet) ved passiv bevægelse.', exclude: ['eps_none'] },
            { id: 'eps_tremor', label: 'Tremor', category: 'Neurologisk (EPS)', text: 'Der observeres tremor.', exclude: ['eps_none'] },
            { id: 'eps_dyskinesia', label: 'Dyskinesier', category: 'Neurologisk (EPS)', text: 'Der ses orofaciale dyskinesier.', exclude: ['eps_none'] },
            { id: 'skin_normal', label: 'Hud: ingen mærker', category: 'Hud/Traumer', text: 'Ingen tegn på friske eller ældre læsioner, injektionsmærker eller scars.', isDefault: true, exclude: ['skin_cut'] },
            { id: 'skin_cut', label: 'Snitsår/Ar', category: 'Hud/Traumer', text: 'Der ses overfladiske snitsår/ar antebrachium.', exclude: ['skin_normal'] },
        ];

        const SOMATIC_ACT_OPTIONS = [
            { id: 'act_cns_ok', label: 'Ingen CNS klager', category: 'CNS', text: 'CNS: Benægter hovedpine, svimmelhed, besvimelse, synsforstyrrelser eller kramper.', isDefault: true, exclude: ['act_cns_headache', 'act_cns_dizzy'] },
            { id: 'act_cns_headache', label: 'Hovedpine', category: 'CNS', text: 'CNS: Angiver hovedpine.', exclude: ['act_cns_ok'] },
            { id: 'act_cp_ok', label: 'Ingen CP klager', category: 'Cardio/Pulm', text: 'CP: Ingen klager over brystsmerter, hjertebanken eller dyspnø.', isDefault: true, exclude: ['act_cp_pain'] },
            { id: 'act_gi_ok', label: 'Ingen GI klager', category: 'Gastro-Intestinal', text: 'GI: Ingen kvalme, opkastninger eller ændring i afføringsmønster.', isDefault: true, exclude: ['act_gi_nausea', 'act_gi_obst'] },
            { id: 'act_gi_nausea', label: 'Kvalme', category: 'Gastro-Intestinal', text: 'GI: Angiver kvalme.', exclude: ['act_gi_ok'] },
            { id: 'act_gi_obst', label: 'Obstipation', category: 'Gastro-Intestinal', text: 'GI: Angiver tendens til forstoppelse.', exclude: ['act_gi_ok'] },
            { id: 'act_uro_ok', label: 'Ingen URO klager', category: 'Urologisk', text: 'Uro: Ingen vandladningsgener (svie, hyppighed eller retention).', isDefault: true, exclude: ['act_uro_retention'] },
            { id: 'act_uro_retention', label: 'Retention', category: 'Urologisk', text: 'Uro: Oplever besvær med at lade vandet (retention).', exclude: ['act_uro_ok'] },
            { id: 'act_musc_ok', label: 'Ingen smerter', category: 'Bevægeapparat', text: 'Bevægeapparat: Ingen aktuelle smerter eller bevægeindskrænkning.', isDefault: true, exclude: ['act_musc_pain'] },
            { id: 'act_musc_pain', label: 'Smerter', category: 'Bevægeapparat', text: 'Bevægeapparat: Angiver rygsmerter/ledsmerter.', exclude: ['act_musc_ok'] },
            { id: 'act_sleep_ok', label: 'Søvn normal', category: 'Søvn/Appetit', text: 'Søvn: Sover uforstyrret igennem natten.', isDefault: true, exclude: ['act_sleep_bad'] },
            { id: 'act_sleep_bad', label: 'Søvnforstyrrelse', category: 'Søvn/Appetit', text: 'Søvn: Angiver indsovningsbesvær og gentagne opvågninger.', exclude: ['act_sleep_ok'] },
            { id: 'act_appetite_ok', label: 'Appetit normal', category: 'Søvn/Appetit', text: 'Appetit: Normal appetit og stabil vægt.', isDefault: true, exclude: ['act_appetite_low'] },
        ];

        // --- APP KOMPONENT ---
        function App() {
            const [activeSection, setActiveSection] = useState('psych');
            const [selectedIds, setSelectedIds] = useState(new Set());
            const [generatedText, setGeneratedText] = useState('');
            const [isFullscreen, setIsFullscreen] = useState(false);
            const [notification, setNotification] = useState(null);
            
            // Initial load
            useEffect(() => {
                const defaults = new Set();
                [...PSYCH_OPTIONS, ...SOMATIC_OBJ_OPTIONS, ...SOMATIC_ACT_OPTIONS].forEach(opt => {
                    if (opt.isDefault) defaults.add(opt.id);
                });
                setSelectedIds(defaults);
            }, []);

            useEffect(() => {
                generateText();
            }, [selectedIds, activeSection]);

            const toggleOption = (option) => {
                const newSelection = new Set(selectedIds);
                if (newSelection.has(option.id)) {
                    newSelection.delete(option.id);
                } else {
                    newSelection.add(option.id);
                    option.exclude?.forEach(exId => newSelection.delete(exId));
                }
                setSelectedIds(newSelection);
            };

            const generateText = () => {
                let options = [];
                if (activeSection === 'psych') options = PSYCH_OPTIONS;
                if (activeSection === 'somatic_obj') options = SOMATIC_OBJ_OPTIONS;
                if (activeSection === 'somatic_act') options = SOMATIC_ACT_OPTIONS;

                const categories = Array.from(new Set(options.map(o => o.category)));
                const lines = [];

                let header = "";
                if (activeSection === 'psych') header = "OBJEKTIVT PSYKISK";
                if (activeSection === 'somatic_obj') header = "OBJEKTIVT SOMATISK & NEUROLOGISK";
                if (activeSection === 'somatic_act') header = "AKTUELT SOMATISK";

                lines.push(header);

                categories.forEach(cat => {
                    const catOptions = options.filter(o => o.category === cat && selectedIds.has(o.id));
                    if (catOptions.length > 0) {
                        const text = catOptions.map(o => o.text).join(' ');
                        lines.push(`${cat}: ${text}`);
                    }
                });

                setGeneratedText(lines.join('\n'));
            };

            const copyToClipboard = () => {
                navigator.clipboard.writeText(generatedText);
                setNotification({ message: 'Tekst kopieret til udklipsholder', type: 'success' });
                setTimeout(() => setNotification(null), 3000);
            };

            const resetSection = () => {
                const currentOptions = activeSection === 'psych' ? PSYCH_OPTIONS : 
                                     activeSection === 'somatic_obj' ? SOMATIC_OBJ_OPTIONS : SOMATIC_ACT_OPTIONS;
                
                const newSet = new Set(selectedIds);
                currentOptions.forEach(o => newSet.delete(o.id));
                currentOptions.filter(o => o.isDefault).forEach(o => newSet.add(o.id));
                
                setSelectedIds(newSet);
            };

            const toggleFullscreen = () => {
                 if (!document.fullscreenElement) {
                    document.documentElement.requestFullscreen().catch((err) => {
                        console.error(err);
                        setNotification({ message: 'Fuldskærm blokeret af browseren', type: 'error' });
                        setTimeout(() => setNotification(null), 3000);
                    });
                    setIsFullscreen(true);
                } else {
                    document.exitFullscreen();
                    setIsFullscreen(false);
                }
            };
            
            // Lyt efter escape
             useEffect(() => {
                const handleFsChange = () => {
                    setIsFullscreen(!!document.fullscreenElement);
                };
                document.addEventListener('fullscreenchange', handleFsChange);
                return () => document.removeEventListener('fullscreenchange', handleFsChange);
            }, []);


            const renderCardGrid = (dataSet) => {
                const categories = Array.from(new Set(dataSet.map(o => o.category)));
                
                return (
                    <div className="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6">
                        {categories.map(cat => (
                            <div key={cat} className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden flex flex-col h-full">
                                <div className="bg-slate-50 px-4 py-3 border-b border-slate-200 flex items-center justify-between">
                                    <h3 className="font-semibold text-slate-700 text-sm uppercase tracking-wide">{cat}</h3>
                                    {dataSet.filter(o => o.category === cat && !o.isDefault && selectedIds.has(o.id)).length > 0 && (
                                        <AlertCircle className="w-4 h-4 text-red-500" />
                                    )}
                                </div>
                                <div className="p-4 flex flex-col gap-2">
                                    {dataSet.filter(o => o.category === cat).map(option => {
                                        const isSelected = selectedIds.has(option.id);
                                        const isPathology = !option.isDefault;
                                        
                                        let btnClass = "w-full text-left px-3 py-2.5 text-sm rounded-lg border transition-all duration-200 flex items-center justify-between group ";
                                        
                                        if (isSelected) {
                                            if (isPathology) {
                                                btnClass += "bg-red-50 border-red-200 text-red-900 shadow-sm";
                                            } else {
                                                btnClass += "bg-emerald-50 border-emerald-200 text-emerald-900 shadow-sm";
                                            }
                                        } else {
                                            btnClass += "bg-white border-transparent hover:bg-slate-50 text-slate-600 hover:text-slate-900";
                                        }

                                        return (
                                            <button key={option.id} onClick={() => toggleOption(option)} className={btnClass}>
                                                <span className="truncate pr-2">{option.label}</span>
                                                {isSelected && (
                                                    isPathology ? 
                                                    <AlertCircle className="w-4 h-4 text-red-600 flex-shrink-0" /> : 
                                                    <CheckCircle2 className="w-4 h-4 text-emerald-600 flex-shrink-0" />
                                                )}
                                            </button>
                                        );
                                    })}
                                </div>
                            </div>
                        ))}
                    </div>
                );
            };

            return (
                <div className="flex flex-col h-screen bg-slate-100 text-slate-900 font-sans overflow-hidden relative">
                    
                    {notification && (
                        <div className={`absolute top-16 left-1/2 transform -translate-x-1/2 z-50 px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 transition-all duration-300 ${
                            notification.type === 'error' ? 'bg-red-600 text-white' : 'bg-slate-800 text-white'
                        }`}>
                            {notification.type === 'error' ? <XCircle className="h-5 w-5" /> : <CheckCircle2 className="h-5 w-5" />}
                            <span className="text-sm font-medium">{notification.message}</span>
                        </div>
                    )}

                    <header className="bg-white border-b border-slate-200 px-6 py-3 flex justify-between items-center shadow-sm shrink-0 z-20">
                        <div className="flex items-center gap-3">
                            <div className="bg-indigo-600 p-1.5 rounded-lg">
                                <Activity className="text-white h-5 w-5" />
                            </div>
                            <div>
                                <h1 className="text-lg font-bold text-slate-800 leading-tight">Psykiatrisk Phrase Generator</h1>
                                <p className="text-xs text-slate-500">Klinisk dokumentationsstøtte</p>
                            </div>
                        </div>
                        <div className="flex items-center gap-4">
                            <button onClick={toggleFullscreen} className="p-2 text-slate-500 hover:text-indigo-600 hover:bg-slate-100 rounded-lg transition-colors" title={isFullscreen ? "Afslut fuldskærm" : "Fuldskærm"}>
                                {isFullscreen ? <Minimize className="h-5 w-5" /> : <Maximize className="h-5 w-5" />}
                            </button>
                        </div>
                    </header>

                    <div className="flex flex-1 overflow-hidden">
                        <nav className="w-64 bg-slate-50 border-r border-slate-200 flex flex-col flex-shrink-0 z-10 overflow-y-auto">
                            <div className="p-4 space-y-2">
                                <button onClick={() => setActiveSection('psych')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${activeSection === 'psych' ? 'bg-white text-indigo-700 shadow ring-1 ring-slate-200' : 'text-slate-600 hover:bg-slate-100'}`}>
                                    <Brain className={`h-5 w-5 ${activeSection === 'psych' ? 'text-indigo-600' : 'text-slate-400'}`} />
                                    <span className="font-medium">Objektivt Psykisk</span>
                                </button>
                                <button onClick={() => setActiveSection('somatic_obj')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${activeSection === 'somatic_obj' ? 'bg-white text-indigo-700 shadow ring-1 ring-slate-200' : 'text-slate-600 hover:bg-slate-100'}`}>
                                    <Stethoscope className={`h-5 w-5 ${activeSection === 'somatic_obj' ? 'text-indigo-600' : 'text-slate-400'}`} />
                                    <span className="font-medium">Obj. Somatisk</span>
                                </button>
                                <button onClick={() => setActiveSection('somatic_act')} className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all duration-200 ${activeSection === 'somatic_act' ? 'bg-white text-indigo-700 shadow ring-1 ring-slate-200' : 'text-slate-600 hover:bg-slate-100'}`}>
                                    <FileText className={`h-5 w-5 ${activeSection === 'somatic_act' ? 'text-indigo-600' : 'text-slate-400'}`} />
                                    <span className="font-medium">Aktuelt Somatisk</span>
                                </button>
                            </div>
                            <div className="mt-auto p-4 border-t border-slate-200">
                                <div className="bg-indigo-50 rounded-lg p-3 text-xs text-indigo-900">
                                    <strong>Tip:</strong> Røde markeringer indikerer patologiske fund. Grønne er normalfund.
                                </div>
                            </div>
                        </nav>

                        <main className="flex-1 overflow-y-auto bg-slate-100 p-6">
                            <div className="max-w-6xl mx-auto">
                                <div className="flex justify-between items-center mb-6">
                                    <div>
                                        <h2 className="text-xl font-bold text-slate-800">
                                            {activeSection === 'psych' && 'Klinisk vurdering (Psykisk)'}
                                            {activeSection === 'somatic_obj' && 'Fysisk & Neurologisk undersøgelse'}
                                            {activeSection === 'somatic_act' && 'Somatisk Anamnese'}
                                        </h2>
                                        <p className="text-sm text-slate-500 mt-1">Vælg relevante observationer. Standardværdier er præ-selekterede.</p>
                                    </div>
                                    <button onClick={resetSection} className="flex items-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 hover:text-indigo-600 transition-colors shadow-sm">
                                        <RotateCcw className="h-4 w-4" /> Nulstil
                                    </button>
                                </div>
                                {activeSection === 'psych' && renderCardGrid(PSYCH_OPTIONS)}
                                {activeSection === 'somatic_obj' && renderCardGrid(SOMATIC_OBJ_OPTIONS)}
                                {activeSection === 'somatic_act' && renderCardGrid(SOMATIC_ACT_OPTIONS)}
                                <div className="h-12"></div>
                            </div>
                        </main>

                        <aside className="w-80 xl:w-96 bg-white border-l border-slate-200 flex flex-col shadow-xl z-20 flex-shrink-0">
                            <div className="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                                <div className="flex items-center gap-2">
                                    <FileText className="h-4 w-4 text-slate-500" />
                                    <h3 className="font-semibold text-slate-700 text-sm uppercase tracking-wide">Resultat</h3>
                                </div>
                            </div>
                            <div className="flex-1 relative">
                                <textarea 
                                    className="absolute inset-0 w-full h-full p-5 border-none resize-none focus:ring-0 text-sm leading-relaxed text-slate-800 font-mono bg-white focus:outline-none"
                                    value={generatedText}
                                    onChange={(e) => setGeneratedText(e.target.value)}
                                    spellCheck="false"
                                ></textarea>
                            </div>
                            <div className="p-4 bg-slate-50 border-t border-slate-200">
                                <button onClick={copyToClipboard} className="w-full flex justify-center items-center gap-2 bg-slate-900 hover:bg-slate-800 text-white px-4 py-3 rounded-lg font-medium transition-all shadow-lg hover:shadow-xl active:transform active:scale-95">
                                    <Clipboard className="h-4 w-4" /> Kopier tekst til journal
                                </button>
                            </div>
                        </aside>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
